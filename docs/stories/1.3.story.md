---
Status: Done
Epic: 1
Story: 3
Title: Display Contest List UI
---

# Story 1.3: Display Contest List UI

*   **As a** user,
*   **I want** to see a list of upcoming contests in a clean, card-based interface,
*   **so that** I can quickly see what's coming up.

## Acceptance Criteria

1.  The main screen fetches contest data from the `ContestService` upon loading.
2.  A loading indicator is shown while the data is being fetched.
3.  Fetched contests are displayed in a vertically scrolling list of cards.
4.  Each card clearly displays the contest name, platform, and start time.
5.  If the fetch fails, a user-friendly error message is displayed.

## Dev Notes

### Previous Story Insights

Story 1.2 created the `ContestService` and `Contest` model. This story will consume that service to display the data in the UI.

### Tech Stack & Framework

*   **UI Components**: Material 3 [Source: architecture/3-tech-stack.md]
*   **State Management**: Riverpod [Source: architecture/3-tech-stack.md]
*   **Testing**: `flutter_test` for widget tests [Source: architecture/12-testing-strategy.md]

### Project Structure

*   **Screen**: Create the main UI screen at `lib/features/contest_list/presentation/contest_list_screen.dart`. [Source: architecture/7-frontend-architecture.md]
*   **Widget**: Create a reusable card widget at `lib/features/contest_list/presentation/widgets/contest_card.dart`. [Source: architecture/7-frontend-architecture.md]
*   **Providers**: State management providers should be located at `lib/features/contest_list/presentation/providers/contest_providers.dart`. [Source: architecture/7-frontend-architecture.md]
*   **Widget Test**: Tests for the new widgets should be created in the `test/features/contest_list/presentation/widgets/` directory. [Source: architecture/12-testing-strategy.md]

### State Management Architecture

*   A `FutureProvider` should be used to fetch the initial list of contests from the `ContestService`. This will automatically handle loading and error states.
*   The UI will consume this provider to rebuild when the data is available or an error occurs.
*   The `ContestListScreen` should be a `ConsumerWidget` to interact with the provider.
[Source: architecture/7-frontend-architecture.md]

### UI/UX Specification

*   The main screen should have a `Scaffold` with an `AppBar` displaying the title "Contest Reminder".
*   The body of the `Scaffold` will display a `ListView` of `ContestCard` widgets.
*   While the `FutureProvider` is loading, a `CircularProgressIndicator` should be displayed in the center of the screen.
*   If the `FutureProvider` returns an error, a centered `Text` widget with a user-friendly error message (e.g., "Failed to load contests.") should be displayed.
*   The `ContestCard` should be a `Card` widget containing a `Column` with `Text` widgets for the contest name, platform, and formatted start time.
[Source: docs/front-end-spec.md]

## Tasks / Subtasks

*   [x] **Task 1: Create Directory Structure** (AC: 1, 3)
    *   [x] Create the directory `lib/features/contest_list/presentation/`.
    *   [x] Create subdirectories `widgets/` and `providers/`.
*   [x] **Task 2: Implement State Management Provider** (AC: 1, 2, 5)
    *   [x] Add `flutter_riverpod` and `riverpod_annotation` to `pubspec.yaml`.
    *   [x] Create the file `lib/features/contest_list/presentation/providers/contest_providers.dart`.
    *   [x] Create a `FutureProvider` that calls the `getUpcomingContests()` method from the `ContestService` (created in Story 1.2).
*   [x] **Task 3: Implement Contest Card Widget** (AC: 4)
    *   [x] Create the file `lib/features/contest_list/presentation/widgets/contest_card.dart`.
    *   [x] Implement a `ContestCard` widget that takes a `Contest` object.
    *   [x] The card should display the `name`, `platform`, and `startTime` properties of the contest.
*   [x] **Task 4: Implement Contest List Screen** (AC: 1, 2, 3, 5)
    *   [x] Create the file `lib/features/contest_list/presentation/contest_list_screen.dart`.
    *   [x] Implement the `ContestListScreen` as a `ConsumerWidget`.
    *   [x] In the `build` method, watch the `FutureProvider`.
    *   [x] Use a `when` clause on the provider's state to return a `CircularProgressIndicator` for loading, a `Text` widget for errors, and a `ListView` for the data state.
    *   [x] Update `lib/main.dart` to show `ContestListScreen` as the `home` of the `MaterialApp`.
*   [x] **Task 5: Write Widget Tests** (AC: 3, 4)
    *   [x] Create a test file for `contest_card_test.dart`.
    *   [x] Write a widget test to verify that the `ContestCard` correctly displays the contest information it is given. [Source: architecture/12-testing-strategy.md]

## QA Results

### Review Date: 2025-09-03

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment

The implementation is of high quality. It correctly uses a Riverpod `FutureProvider` to manage the asynchronous loading of contest data, including handling loading and error states gracefully. The UI is cleanly separated into a screen and a reusable card widget, adhering to the project's architecture.

### Refactoring Performed

No refactoring was necessary.

### Compliance Check

- Coding Standards: [✓]
- Project Structure: [✓]
- Testing Strategy: [✓]
- All ACs Met: [✓]

### Improvements Checklist

- [x] All tasks completed and verified.
- [ ] Consider adding a widget test for `ContestListScreen` to explicitly verify the loading and error UI states.

### Security Review

No security concerns were found.

### Performance Considerations

No performance issues were identified. The use of `ListView.builder` is correct and efficient.

### Files Modified During Review

None.

### Gate Status

Gate: PASS → docs/qa/gates/1.3-display-contest-list-ui.yml

### Recommended Status

[✓ Ready for Done]

## Dev Agent Record
*   **Agent Model Used**:
*   **Debug Log References**:
*   **Completion Notes**:
*   **File List**:
    *   `lib/features/contest_list/presentation/providers/contest_providers.dart`
    *   `lib/features/contest_list/presentation/providers/contest_providers.g.dart`
    *   `lib/features/contest_list/presentation/widgets/contest_card.dart`
    *   `lib/features/contest_list/presentation/contest_list_screen.dart`
    *   `test/features/contest_list/presentation/widgets/contest_card_test.dart`
    *   `pubspec.yaml`
    *   `pubspec.lock`
    *   `lib/main.dart`
    *   `docs/stories/1.3.story.md`
*   **Change Log**:
